<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:AvaloniaAppChart.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:lvc="clr-namespace:LiveChartsCore.SkiaSharpView.Avalonia;assembly=LiveChartsCore.SkiaSharpView.Avalonia"
        mc:Ignorable="d" d:DesignWidth="400" d:DesignHeight="450"
        xmlns:dataGrid="clr-namespace:Avalonia.Controls;assembly=Avalonia.Controls.DataGrid"
        x:Class="AvaloniaAppChart.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        xmlns:local="clr-namespace:AvaloniaAppChart.Common"
        x:Name="root"
        Icon="/Assets/avalonia-logo.ico"
        Title="AvaloniaAppChart"
        Width="800"
        Height="800">
  
  <Window.Resources>
    <local:PlaceholderConverter x:Key="PlaceholderConverter"/>
  </Window.Resources>

  <StackPanel Margin="10">
    
    <StackPanel Orientation="Horizontal" Spacing="5" Margin="10">
      <Button Content="ÐšÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ" Command="{Binding CopyCommand}" />
      <Button Content="Ð’ÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ" Command="{Binding PasteCommand}" />
      <Button Content="ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ" Command="{Binding ClearCommand}" />
      <Button Content="Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð² Ñ„Ð°Ð¹Ð»" Command="{Binding SaveToFileCommand}" />
      <Button Content="Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð¸Ð· Ñ„Ð°Ð¹Ð»Ð°" Command="{Binding LoadFromFileCommand}" />
      <Button Content="ÐžÐ±Ñ€Ð°Ñ‚Ð½Ð°Ñ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ"
                    Command="{Binding ToggleInverseCommand}" />
    </StackPanel>

    <dataGrid:DataGrid ItemsSource="{Binding ChartPoints}"
                       AutoGenerateColumns="False"
                       Height="300"
                       GridLinesVisibility="All"
                       BorderBrush="Gray"
                       BorderThickness="1">
      <dataGrid:DataGrid.Columns>
        <dataGrid:DataGridTemplateColumn Header="X" Width="*">
          <dataGrid:DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
              <TextBlock Text="{Binding X, Converter={StaticResource PlaceholderConverter}}" />
            </DataTemplate>
          </dataGrid:DataGridTemplateColumn.CellTemplate>

          <dataGrid:DataGridTemplateColumn.CellEditingTemplate>
            <DataTemplate>
              <StackPanel>
                <TextBox Text="{Binding X, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                         Watermark="Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ X" />
              </StackPanel>
            </DataTemplate>

          </dataGrid:DataGridTemplateColumn.CellEditingTemplate>
        </dataGrid:DataGridTemplateColumn>

        <dataGrid:DataGridTemplateColumn Header="Y" Width="*">
          <dataGrid:DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
              <TextBlock Text="{Binding Y, Converter={StaticResource PlaceholderConverter}}" />
            </DataTemplate>
          </dataGrid:DataGridTemplateColumn.CellTemplate>

          <dataGrid:DataGridTemplateColumn.CellEditingTemplate>
            <DataTemplate>
              <TextBox Text="{Binding Y, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                       Watermark="Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Y" />
            </DataTemplate>
          </dataGrid:DataGridTemplateColumn.CellEditingTemplate>
        </dataGrid:DataGridTemplateColumn>

        <dataGrid:DataGridTemplateColumn Header="âœ–" Width="Auto">
          <dataGrid:DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
              <Button Content="ðŸ—‘"
                      Command="{Binding #root.((vm:MainWindowViewModel)DataContext).DeletePointCommand}"
                      CommandParameter="{Binding}"
                      Padding="2"
                      ToolTip.Tip="Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ñ‚Ð¾Ñ‡ÐºÑƒ"
                      IsVisible="{Binding IsFilled}"/>

            </DataTemplate>
          </dataGrid:DataGridTemplateColumn.CellTemplate>
        </dataGrid:DataGridTemplateColumn>
        
      </dataGrid:DataGrid.Columns>
    </dataGrid:DataGrid>

    <lvc:CartesianChart Series="{Binding Series}"
                    XAxes="{Binding XAxes}"
                    YAxes="{Binding YAxes}"
                    Height="400"
                    Margin="0,10,0,0"
                    IsVisible="{Binding !IsInverseVisible}"/>

    <StackPanel IsVisible="{Binding IsInverseVisible}">
      <TextBlock Text="ÐžÐ±Ñ€Ð°Ñ‚Ð½Ð°Ñ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ"
                 FontSize="16"
                 FontWeight="Bold"
                 Margin="0,0,0,5"/>
      <lvc:CartesianChart Series="{Binding InverseSeries}"
                          XAxes="{Binding YAxes}"
                          YAxes="{Binding XAxes}"
                          Height="400" />
    </StackPanel>
  </StackPanel>
</Window>